let products_list = {
	"1": ['Бальзам СТАРЫЙ МАРИИНСК 0,5л 40% (Уссурийский бальзам) ШК 4603928000563', "300 RUB", "1"],
	"2": ['Вино "БОЖОЛЕ-ВИЛЯЖ АОС" 2015 защ. наим. места происх. красное сухое 0,75л 13% (Франция)', "7000 RUB", "7.7"],
	"3": [
		'Вино "БЭНРОК СТЕЙШН КАБЕРНЕ СОВИНЬОН" 2014 защ. геогр. указ. красное полусухое 0,75л 13% (Австралия)',
		"2400 RUB",
		"3.1"
	],
	"4": ['Вино "БЭНРОК СТЕЙШН КРАСНОЕ" столовое красное полусухое 0,75л 12,5% (Австралия)', "1100 RUB", "1.8"],
	"5": [
		'Вино "Бэнрок Стейшн Шардоне" 2014 защ. геогр. указ. белое полусухое 0,75л 13% (Австралия) (404)',
		"1200 RUB",
		"1.9"
	],
	"6": [
		'Вино "БЭНРОК СТЕЙШН ШИРАЗ" 2015 защ. геогр. указ. красное полусухое 0,75л 13,5% (Соед.Королевство)',
		"1300 RUB",
		"2"
	],
	"7": [
		'Вино "Вальполичелла ДОК Вилла Альберти" защ.наим.места происх.красное сухое 0,75л 11,5%(Италия)',
		"5100 RUB",
		"5.8"
	],
	"8": [
		'Вино "ДОН БАТИСТО КОСЕЧА" защ.наим.м.проис. красное сухое рег.Риоха кат.DOС 0,75л 13,5% (Испания)',
		"4300 RUB",
		"5"
	],
	"9": [
		'Вино "КАСТИЛЬО САНТА БАРБАРА ГРАН РЕЗЕРВА" защ.н.м.проис. красное сухое кат.D.O. 0,75л 13% (Испания)',
		"4200 RUB",
		"4.9"
	],
	"10": ['Вино "ЛА КОНСУЛЬТА ПИНО ГРИДЖИО" защ. геогр. указ. сухое белое 0,75л 13% (Аргентина)', "3200 RUB", "3.9"],
	"11": [
		'Вино "МАС РАБЕЛЛЬ КАТАЛОНИЯ ДО" 2015 защ. наим .м. происх. белое сухое 0,75л 11,5% (Испания)',
		"5000 RUB",
		"5.7"
	],
	"12": [
		'Вино "МАС РАБЕЛЛЬ КАТАЛОНИЯ ДО" защ. наим .м. происх. розовое сухое 0,75л 13,5% (Испания)',
		"4900 RUB",
		"5.6"
	],
	"13": [
		'Вино "НОБИЛОМО" МАРЦЕМИНО защ.н.м. пр. красное п/сладкое рег.Эмилия-Романья кат.DOC 0,75л 8%(Италия)',
		"4100 RUB",
		"4.8"
	],
	"14": [
		'Вино "Паяра Розато Апулия ИГТ" 2015 защ. геогр. указ. розовое полусухое 0,75л 11% (Италия)',
		"1400 RUB",
		"2.1"
	],
	"15": [
		'Вино "Соаве ДОК Вилла Альберти" защ. наим. места происх. белое сухое 0,75л 11,5% ( Италия)',
		"2700 RUB",
		"3.4"
	],
	"16": ['Вино "Ундуррага Шардоне" защ. геогр. указ. белое сухое 0,75л 13,5% (Чили)', "2900 RUB", "3.6"],
	"17": [
		'Вино "Чекки Орвьето Классико ДОКГ" защ. наим. места происх. сухое белое 0,75л 12,5% (Италия) (405)',
		"3100 RUB",
		"3.8"
	],
	"18": [
		'Вино "Шато дю Корне Бордо АОС" 2014 защ. наим. места происх. белое сухое 0,75л 12% (Франция) (405)',
		"2800 RUB",
		"3.5"
	],
	"19": [
		'Вино "Шато Ле Гранд Винь Антр-Де-Мер АОС" 2015 защ.наим.м.происх. белое сухое 0,75л 12% (Франция)',
		"2500 RUB",
		"3.2"
	],
	"20": [
		'Вино "ШАТО ЛЮСЬЕР БОРДО АОС" 2014 защ. наим. места происх. красное сухое 0,75л 12,5 % (Франция)',
		"5200 RUB",
		"5.9"
	],
	"21": [
		'Вино "Шато Пикар Бордо АОС" 2015 защ.наим.места происх. красное сухое 0,75л 12,5% (Франция)',
		"2600 RUB",
		"3.3"
	],
	"22": [
		'Вино Боттер Соаве защ. наим. места происх. белое сухое кат.DOC рег.Венето 0,75л 12% (Италия)',
		"1900 RUB",
		"2.6"
	],
	"23": [
		'Вино Вилла Альба Пино Гриджио 2015 защ.геогр. указ. белое сухое кат.IGT рег.Пулия 0,75л 12% (Италия)',
		"5300 RUB",
		"6"
	],
	"24": [
		'Вино ВИСТАФЛОР СОВИНЬОН БЛАН-ШЕНЭН 2015 защ. геогр. указ. белое сухое рег.Мендоса 0,75л 13%',
		"5900 RUB",
		"6.6"
	],
	"25": ['Вино игристое "МАРТИНИ ПРОСЕККО" геогр. указ. сухое белое кат.D.O.C. 0,2л 11,5% (Италия)', "1700 RUB", "2.4"],
	"26": [
		'Вино игристое "МАРТИНИ ПРОСЕККО" геогр. указ. сухое белое кат.D.O.C. 0,75л 11,5% (Италия)',
		"2000 RUB",
		"2.7"
	],
	"27": [
		'Вино игристое Кава Лар де Плата Брют защ. наим. места происх. белое брют рег.Эстремадура 0,75л 11,5%',
		"1800 RUB",
		"2.5"
	],
	"28": ['Вино ИЗАБЕЛЛА столовое полусладкое красное 2л*6 10-12% /Фанагория/', "6700 RUB", "7.4"],
	"29": ['Вино КАБЕРНЕ столовое сухое красное 2,0л*6 11-13% /Фанагория/', "2300 RUB", "3"],
	"30": ['Вино ЛЕ КОЛОМБЬЕР столовое белое полусладкое 0,75л 11% (Франция)', "5700 RUB", "6.4"],
	"31": ['Вино ЛЕ КОЛОМБЬЕР столовое белое сухое 0,75л 11% (Франция)', "5500 RUB", "6.2"],
	"32": ['Вино ЛЕ КОЛОМБЬЕР столовое красное полусладкое 0,75л 11% (Франция)', "5800 RUB", "6.5"],
	"33": ['Вино ЛЕ КОЛОМБЬЕР столовое красное сухое 0,75л 11% (Франция)', "5600 RUB", "6.3"],
	"34": [
		'Вино ликерное КОКБЕРНС 10 ТОНИ ПОРТ защ.наим. места проис. рег.Долина Дору кат.DOC выдерж. 0,75л 20%',
		"3500 RUB",
		"4.2"
	],
	"35": [
		'Вино ликерное КОКБЕРНС 20 ТОНИ ПОРТ защ. наим. места проис. рег.Долина Дору кат.DOC выдерж. 0,5л 20%',
		"3700 RUB",
		"4.4"
	],
	"36": [
		'Вино ликерное КОКБЕРНС ЛЕЙТ БОТТЛД ВИНТАЖ ПОРТ защ.наим.м.проис. р.Долина Дору к.DOC выдер 0,75л 20%',
		"3600 RUB",
		"4.3"
	],
	"37": [
		'Вино ликерное КОКБЕРНС ФАЙН ВАЙТ ПОРТ защ.наим.места проис. выдерж. 0,75л 19% р.Долина Дору кат.DOC',
		"3800 RUB",
		"4.5"
	],
	"38": [
		'Вино Маркес де Касерес Бланко 2016 защ.наим.мест.происх. белое сухое кат.DOC рег.Риоха 0,75л 12,5%',
		"3400 RUB",
		"4.1"
	],
	"39": [
		'Вино Пондерадо Тинто 2016 защ. геогр. указания красное сухое рег.Центральная Долина 0,75л*12 12%',
		"400 RUB",
		"1.1"
	],
	"40": [
		'Вино САЛИДА КАБЕРНЕ СОВИНЬОН защ.наим.м.пр. сухое красное рег.Канелонес кат.VCP 0,75л 12,5%(Уругвай)',
		"700 RUB",
		"1.4"
	],
	"41": ['Вино ФАЛЬКОНАРДИ БЬЯНКО столовое белое полусладкое 0,75л 10% (Италия)', "5400 RUB", "6.1"],
	"42": ['Вино ФАЛЬКОНАРДИ РОССО столовое красное полусладкое 0,75л 10,5% (Италия)', "6900 RUB", "7.6"],
	"43": [
		'Вино ШАТО БЕЛЬГРАВ защ.наим.м.происх. сухое красное кат.АОС рег.Медок 0,75 13% (Франция) (405)',
		"4400 RUB",
		"5.1"
	],
	"44": [
		'Вино Шато Нодо 2014 защ. наим. места происх. красное сухое кат.АОС рег.Бордо 0,75л 11,5% (Фран)(402)',
		"6800 RUB",
		"7.5"
	],
	"45": ['Вино ШЕВАЛЬЕ ДЕ ПЬЕР МЕРЛО столовое красное сухое 0,75л крепость 12,5 об.% (Франция)', "500 RUB", "1.2"],
	"46": [
		'Вино Эхо Фоллс Уайт Зинфандель 2015 защ.геогр. указания розовое полусладкое рег.Калифорния 0,75л 10%',
		"3300 RUB",
		"4"
	],
	"47": ['Виски купажированный "Вильям Лоусонс" 0,5л 40% (Россия, Традиции Качества)', "3900 RUB", "4.6"],
	"48": [
		'Виски шотландский односолодовый "ГЛЕНМОРАНДЖИ ЛАСАНТА" выдержка 12 лет 0,7л в п/у 43% (237)',
		"6400 RUB",
		"7.1"
	],
	"49": [
		'Виски шотландский односолодовый "ГЛЕНМОРАНДЖИ ОРИДЖИНАЛ" выдержка 10 лет 0,7л в п/у 40% (237)',
		"6300 RUB",
		"7"
	],
	"50": ['Водка "ВЫСОТА PREMIUM ЛЮКС на ледниковой воде" 0,5л 40% (Старооскольский ЛВЗ Люкс)', "1000 RUB", "1.7"],
	"51": [
		'Водка "КЛАССИЧЕСКАЯ ПУТИНКА МЯГКАЯ (CLASSIC PUTINKA SOFT)" 0,5л 40% (АО Московский завод Кристалл)',
		"600 RUB",
		"1.3"
	],
	"52": ['Водка БЕЛЕНЬКАЯ 1,0л 40% (АО АЛВИЗ)', "1500 RUB", "2.2"],
	"53": ['Водка особая БАЙКАЛ КЛЮКВА 0,5л 40% (Юпитер Инкорпорейтед)', "900 RUB", "1.6"],
	"54": ['Водка особая СЛАВЯНСКАЯ РЖАНАЯ ИЗ ОТБОРНОЙ РЖИ 0,25л 40% (Юпитер Инкорпорейтед)', "800 RUB", "1.5"],
	"55": [
		'Коньяк "ХЕННЕССИ ВС (HENNESSY VS)" выдержка 3 года 0,2л 40% (Франция) (Моет Хеннесси Рус)',
		"6100 RUB",
		"6.8"
	],
	"56": [
		'Коньяк "ХЕННЕССИ ВС" выдержка 3 года 0,7л 40% об. (светящаяся бутылка) (Франция) (Моет Хеннеси Рус)',
		"6200 RUB",
		"6.9"
	],
	"57": ['Коньяк армянский "ШИРАЗ" выдержка 5 лет 0,5л 40% (Прошянский кз, ВинЛэнд)', "6000 RUB", "6.7"],
	"58": ['Коньяк грузинский "САРАДЖИШВИЛИ ХО" выдержка 10 лет (в п/уп) в с/бут 0,35л 40% (Грузия)', "6500 RUB", "7.2"],
	"59": ['Коньяк грузинский "САРАДЖИШВИЛИ ХО" выдержка 10 лет (в п/уп) в с/бут 0,7л 40% (Грузия)', "6600 RUB", "7.3"],
	"60": ['Ликер "ДЖАРОЛА КРЕМ ДЕ КАССИС" 0,7л 17% (Италия) КПП 780245001', "2100 RUB", "2.8"],
	"61": ['Ликер десертный "БОЛС ПИЧ" со вкусом персика и апельсина 0,7л 17% (Нидерланды)', "4000 RUB", "4.7"],
	"62": ['Настойка горькая "КЕДРОВАЯ ПАДЬ" 0,5л*20 РС14-2 45% (Уссурийск)', "2200 RUB", "2.9"],
	"63": ['Ром БОТУКАЛЬ АНЬЕХО выдержка 4 года 0,7л 40% (Венесуэла)', "1600 RUB", "2.3"],
	"64": ['Российский коньяк выдержанный "КВ" "Лезгинка" 0,25л 40% (ФГУП "ККЗ")', "3000 RUB", "3.7"],
	"65": ['Российский коньяк пятилетний "СТАРЫЙ РУССКИЙ ДУБ" 0,5л 40% /Фанагория/', "4500 RUB", "5.2"],
	"66": [
		'Российское шампанское "БЛАН ДЕ НУАР" выдержанное экстра брют белое 0,75л 12% (Лазурная Ягода)',
		"4600 RUB",
		"5.3"
	],
	"67": [
		'Российское шампанское "БЛАН ДЕ НУАР" выдержанное экстра брют белое 1,5л 12% (Лазурная Ягода)',
		"4800 RUB",
		"5.5"
	],
	"68": [
		'Российское шампанское "ГРАНД КЮВЕ" выдержанное экстра брют белое 0,75л 12% (Лазурная Ягода)',
		"4700 RUB",
		"5.4"
	],
};

module.exports = {
	before: function (browser) {
		console.log('Begining test DEV-1633...');
	},

	after: function (browser) {
		console.log('Finishing test DEV-1633...');
		browser.end();
	},

	'Test DEV-1633 cart products operations': function (browser) {

		// let array_length = browser.globals.vars.length_array;

		browser.url('http://dev.mixcart.ronasit.com/login', () => {
			console.log('Loading http://dev.mixcart.ronasit.com/login...');
		});
		browser.waitForElementVisible('#email', 7000, function () {
			console.log('email input appeared...');
		});
		browser.waitForElementVisible('#password', 7000, function () {
			console.log('password input appeared...');
		});
		browser.waitForElementVisible('.dropdown-trigger', 7000, function () {
			console.log('drop-down trigger appeared appeared...');
		});
		browser.click('.dropdown-trigger');
		browser.click('.dropdown-content a:nth-child(1)');

		browser.setValue('#email', 'mixcart@bk.ru');
		browser.setValue('#password', 'max999');
		browser.expect.element('#email').to.have.value.that.equals('mixcart@bk.ru');
		browser.expect.element('#password').to.have.value.that.equals('max999');
		browser.submitForm('form');

		browser.expect.element('h3[class="guest-form-title"]').text.to.equal('Ваш бизнес-профиль').before(10000);

		browser.click('.guest-form-fields a:nth-child(1)');

		browser.waitForElementVisible('.header-profile-name', 7000, function (result) {
			console.log('.header-profile-name appeared...');
		});

		browser.url('http://dev.mixcart.ronasit.com/client/create-order/my-supplier-goods', () => {
			console.log('Loading http://dev.mixcart.ronasit.com/client/create-order/my-supplier-goods...');//Переходим на
		                                                                                                 // страницу
		                                                                                                 // заказов
		});

		browser.resizeWindow(1980, 1080);

		// browser.pause(3000);

		browser.waitForElementVisible('.filters .filter-sort', 7000);

		browser.saveScreenshot('tessstt.png');

		browser.perform(function () {
			console.log('trying to scroll down....please wait...');
		});

		for (let i = 0; i < 7; i++) {
			browser.execute(function () {
				window.scrollBy(0, 10000);
			}, []);
			browser.pause(5000);
		}

		// operations in the cart test

		// for (let key in products_list) {
		//     browser.verify.containsText('app-product-list table tbody tr:nth-child(' + key + ') td:nth-child(1)',
		// products_list[key][0]); browser.verify.containsText('app-product-list table tbody tr:nth-child(' + key + ')
		// td:nth-child(4)', products_list[key][1]); }

		// for (let i = 1; i < Object.keys(products_list).length + 1; i++) {
		//     let s = String(i);
		//     browser.verify.containsText('app-product-list table tbody tr:nth-child(' + String(i) + ') td:nth-child(1)',
		// products_list[s][0]); browser.verify.containsText('app-product-list table tbody tr:nth-child(' + String(i) + ')
		// td:nth-child(4)', products_list[s][1]); browser.pause(1000); }

		browser.elements('css selector', 'app-product-list table tbody tr', function (res) {
			console.log('row count: ' + res.value.length);
			browser.verify.equal(res.value.length, Object.keys(products_list).length);
		});

		browser.resizeWindow(1980, 7000);
		browser.saveScreenshot('tesssstttt___full llist.png');
		browser.resizeWindow(1980, 1080);

		function test_adding_products_to_cart(b, array, product_count) {

			b.element('css selector', 'body', function () {
				console.log('Adding products to cart');
			});

			let i = 0;

			for (let key in array) {
				i++;
				if (i > product_count) {
					break;
				}
				b.execute(function (key) {
					let a1 = document.querySelector('app-product-list table tbody tr:nth-child(' + key + ') td:nth-child(6) .quantity-plus');
					let a2 = document.querySelector('app-product-list table tbody tr:nth-child(' + key + ') td:nth-child(6) input');
					a1.setAttribute('id', 'test');
					a2.setAttribute('id', 'test_input');
				}, [key]);

				b.execute(function () {
					let a = document.getElementById('test');
					a.click();
				}, []);
				b.pause(1000);

				b.perform(function () {
					console.log('multiplicity = ' + array[key][2]);
				});

				b.verify.attributeEquals('#test_input', 'value', array[key][2]);
				b.pause(200);
				let cart_key = Number(key);

				b.waitForElementVisible('.cart-contents app-order .cart-item:nth-child(' + String(cart_key + 1) + ')', 7000, function () {
					console.log('item appeared in the cart...');
				});

				b.verify.containsText('app-order .cart-item:nth-child(' + String(cart_key + 1) + ') .cart-item-title', array[key][0]);

				b.verify.attributeEquals('app-order .cart-item:nth-child(' + String(cart_key + 1) + ') input', 'value', array[key][2]);

				b.execute(function () {
					let a = document.getElementById('test');
					let b = document.getElementById('test_input');
					a.removeAttribute('id');
					b.removeAttribute('id');
				}, []);
				b.pause(500);
			}

			browser.resizeWindow(1980, 7000);
			b.saveScreenshot('test___.png');
			browser.resizeWindow(1980, 1080);
		}

		function test_cart_plus_operation(b, array, product_count, clickCount) {

			b.element('css selector', 'body', function () {
				console.log('Testing cart plus operation...');
			});

			let i = 0;

			for (let key in array) {
				i++;
				if (i > product_count) {
					break;
				}
				b.execute(function (key) {
					let str = String(parseInt(key) + 1);
					let a1 = document.querySelector('app-order .cart-item:nth-child(' + str + ') .quantity input');
					let a2 = document.querySelector('app-order .cart-item:nth-child(' + str + ') .quantity .quantity-plus');
					a1.setAttribute('id', 'test_input');
					a2.setAttribute('id', 'test_plus');
				}, [key]);

				for (let i = 0; i < clickCount; ++i) {
					b.execute(function () {
						let a = document.getElementById('test_plus');
						a.click();
					}, []);
					b.pause(1000);
				}

				b.perform(function () {
					console.log('multiplicity = ' + array[key][2]);
				});

				b.verify.attributeEquals('#test_input', 'value', String(Math.round(Number(array[key][2]) * (clickCount + 1) * 100) / 100));
				b.pause(1000);

				b.execute(function () {
					let a = document.getElementById('test_input');
					let b = document.getElementById('test_plus');
					a.removeAttribute('id');
					b.removeAttribute('id');
				}, []);
				b.pause(500);
			}

			b.resizeWindow(1980, 7000);
			b.saveScreenshot('test___.png');
			b.resizeWindow(1980, 1080);
		}

		function test_cart_minus_operation(b, array, product_count, click_count_now, click_count_before) {

			b.element('css selector', 'body', function () {
				console.log('Testing cart minus operation...');
			});

			let i = 0;

			for (let key in array) {
				i++;
				if (i > product_count) {
					break;
				}
				b.execute(function (key) {
					let str = String(parseInt(key) + 1);
					let a1 = document.querySelector('app-order .cart-item:nth-child(' + str + ') .quantity input');
					let a2 = document.querySelector('app-order .cart-item:nth-child(' + str + ') .quantity .quantity-minus');
					a1.setAttribute('id', 'test_input');
					a2.setAttribute('id', 'test_minus');
				}, [key]);

				for (let i = 0; i < click_count_now; ++i) {
					b.execute(function () {
						let a = document.getElementById('test_plus');
						a.click();
					}, []);
					b.pause(1000);
				}

				b.perform(function () {
					console.log('multiplicity = ' + array[key][2]);
				});

				b.verify.attributeEquals('#test_input', 'value', String(Math.round(Number(array[key][2]) * (click_count_before - click_count_now + 1) * 100) / 100));
				b.pause(1000);

				b.execute(function () {
					let a = document.getElementById('test_input');
					let b = document.getElementById('test_plus');
					a.removeAttribute('id');
					b.removeAttribute('id');
				}, []);
				b.pause(500);
			}

			b.resizeWindow(1980, 7000);
			b.saveScreenshot('test___.png');
			b.resizeWindow(1980, 1080);
		}

		function test_cart_product_input_operation(b, array, product_count) {
			b.element('css selector', 'body', function () {
				console.log('Testing random inputs to the cart...')
			});

			function expected_input(multiplicity, my_input) {

				let n = parseInt(String(my_input / multiplicity));

				if (n === 0) {
					return multiplicity;
				}

				let n_multiplicity = n * multiplicity;

				let diff = my_input - n_multiplicity;

				// console.log(diff)

				if (diff >= (multiplicity / 2)) {
					// console.log('1');
					return Math.round(parseFloat(String((n + 1) * multiplicity)) * 100) / 100;
				} else {
					// console.log('2');
					return Math.round(String(n_multiplicity) * 100) / 100;
				}
			}

			function getRandomInt(min, max) {
				return Math.floor(Math.random() * (max - min)) + min;
			}

			let i = 0;

			for (let key in array) {

				i++;

				if (i > product_count) {
					break;
				}

				b.execute(function (key) {
					let str = String(parseInt(key) + 1);
					let a1 = document.querySelector('app-order .cart-item:nth-child(' + str + ') .quantity input');
					a1.setAttribute('id', 'test_input');
				}, [key]);

				b.pause(1000);

				let randInput = String(getRandomInt(10, 30));

				b.perform(function () {
					console.log('rand value = ' + randInput);
					console.log('multiplicity = ' + array[key][2]);
				});

				b.clearValue('#test_input', function () {
					console.log('Clearing input value...');
				});

				b.pause(1000);

				b.setValue('#test_input', [randInput, b.Keys.ENTER], function (res) {
					// console.log(res);
				});

				b.pause(1000);

				b.verify.attributeEquals('#test_input', 'value', String(expected_input(Number(array[key][2]), Number(randInput))));

				b.execute(function () {
					let a = document.getElementById('test_input');
					a.removeAttribute('id');
				}, []);
				b.pause(1000);
			}

			b.resizeWindow(1980, 7000);
			b.saveScreenshot('test___1.png');
			b.resizeWindow(1980, 1080);

		}

		function test_delete_items_from_cart(b, cart_size, count_to_delete) {
			if (count_to_delete > cart_size) {
				b.perform(function () {
					console.log('you cant delete element more then cart size...');
				})
			} else {
				for (let i = cart_size + 1; i > cart_size - count_to_delete + 1; i--) {
					b.perform(function () {
						console.log('deleting cart item ' + String(i - 1));
					});
					let k = String(i);
					b.execute(function (k) {
						let a = document.querySelector('app-order .cart-item:nth-child(' + k + ') .cart-item-remove');
						a.setAttribute('id', 'item_deleted_by_me');
						a.click();
					}, [k]);

					b.pause(1000);
					b.saveScreenshot('delete_' + k + '_.png');

					let r = new RegExp("^" + String(i - 2) + "");

					b.expect.element('app-cart .cart .cart-total div').text.to.match(r).before(10000);
					b.waitForElementNotPresent('#item_deleted_by_me', 10000);
					b.execute(function () {
						let a = document.getElementById('item_deleted_by_me');
						a.removeAttribute('id');
					}, []);
					b.pause(3000);
				}

				// let n = cart_size - count_to_delete;

				b.element('css selector', 'body', function () {
					console.log('checking cart size after deleting items...');
				});

				b.elements('css selector', 'app-order .cart-item', function (res) {
					console.log('cart size: ' + res.value.length);
					// browser.verify.equal(res.value.length, n);
				});
				b.saveScreenshot('cart_after_delete.png');
				// b.execute(function (b, n) {
				//     let a = document.querySelectorAll('app-order .cart-item');
				//     b.verify.equal(a.length, n);
				// }, [b, n]);

			}
		}

		function test_clearing_cart(b) {
			let cart_size;

			b.elements('css selector', 'app-order .cart-item', function (res) {
				cart_size = res.value.length;
			});
			b.perform(function () {
				if (cart_size === 0) {
					console.log('cart is already empty...');
				} else {
					console.log('okey i will try to empty it');
					b.click('app-cart .cart .cart-head .button-red', function () {
						console.log('tried to empty cart...');
					});
					b.waitForElementPresent('app-cart .cart-empty', 5000, false, function (res) {
						console.log('i really tried it...hope it is empty');
					});
				}
			})
		}

		let products_to_cart = 4;

		let click_count_plus = 4;

		let click_count_minus = 2;

		let count_to_delete = 1;

		test_adding_products_to_cart(browser, products_list, products_to_cart);
		//
		test_cart_plus_operation(browser, products_list, products_to_cart, click_count_plus);
		//
		test_cart_minus_operation(browser, products_list, products_to_cart, click_count_minus, click_count_plus);
		//
		test_cart_product_input_operation(browser, products_list, products_to_cart);
		//
		// test_delete_items_from_cart(browser, products_to_cart, count_to_delete);

		test_clearing_cart(browser);

		//end

		browser.refresh();

		// browser.pause(2000);

		browser.expect.element("span[class='header-profile-name']").text.to.equal('Mo\'s').before(10000);

		browser.pause(2000);
		browser.click("span[class='header-profile-name']");
		browser.click("a[class='button-link header-user-logout']");
		browser.expect.element("h3[class='guest-form-title']").text.to.equal('Добро пожаловать').before(10000); //Ждём пока
	                                                                                                          // не
	                                                                                                          // выйдем

	},

	// 'Test DEV-1632 clear cart': function (browser) {
	//
	//     // let array_length = browser.globals.vars.length_array;
	//
	//     browser.url('http://dev.mixcart.ronasit.com/login', () => {
	//         console.log('Loading http://dev.mixcart.ronasit.com/login...');
	//     });
	//     browser.waitForElementVisible('#email', 7000, function () {
	//         console.log('email input appeared...');
	//     });
	//     browser.waitForElementVisible('#password', 7000, function () {
	//         console.log('password input appeared...');
	//     });
	//     browser.waitForElementVisible('.dropdown-trigger', 7000, function () {
	//         console.log('drop-down trigger appeared appeared...');
	//     });
	//     browser.click('.dropdown-trigger');
	//     browser.click('.dropdown-content a:nth-child(1)');
	//
	//     browser.setValue('#email', 'mixcart@bk.ru');
	//     browser.setValue('#password', 'max999');
	//     browser.expect.element('#email').to.have.value.that.equals('mixcart@bk.ru');
	//     browser.expect.element('#password').to.have.value.that.equals('max999');
	//     browser.submitForm('form');
	//
	//     browser.expect.element('h3[class="guest-form-title"]').text.to.equal('Ваш бизнес-профиль').after(5000);
	//
	//     browser.click('.guest-form-fields a:nth-child(1)');
	//
	//     browser.waitForElementVisible('.header-profile-name', 7000, function (result) {
	//         console.log('.header-profile-name appeared...');
	//     });
	//
	//     browser.url('http://dev.mixcart.ronasit.com/client/create-order/my-supplier-goods', () => {
	//         console.log('Loading http://dev.mixcart.ronasit.com/client/create-order/my-supplier-goods...');//Переходим
	// на страницу заказов });  browser.resizeWindow(1980, 5000);  browser.pause(3000);
	// browser.waitForElementVisible('.filters .filter-sort', 7000);  browser.saveScreenshot('tessstt.png');   //cart
	// clear test for (let i = 0; i < 3; i++) { browser.pause(10000); browser.waitForElementVisible('app-cart .cart
	// .cart-head .cart-buttons .button-red', 7000, function () { console.log('clear cart button appeared...'); });
	// browser.waitForElementVisible('app-cart .cart .cart-head .cart-buttons .button-red', 7000, function () {
	// console.log('clear cart button appeared...'); }); browser.click('app-cart .cart .cart-head .cart-buttons
	// .button-red'); browser.pause(10000); browser.waitForElementVisible('app-cart .cart .cart-empty', 7000, function ()
	// { console.log('empty cart appeared...') }); browser.saveScreenshot('empty.cart.' + i + '.png'); browser.refresh();
	// } //end  browser.pause(5000);
	// browser.expect.element("span[class='header-profile-name']").text.to.equal('Mo\'s').before(10000);
	// browser.pause(2000); browser.click("span[class='header-profile-name']"); browser.click("a[class='button-link
	// header-user-logout']"); browser.expect.element("h3[class='guest-form-title']").text.to.equal('Добро
	// пожаловать').before(10000); //Ждём пока не выйдем },
};
